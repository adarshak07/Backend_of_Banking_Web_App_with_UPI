# ----------------------------------------
# Server
# ----------------------------------------
server.port=${PORT:8080}
server.address=0.0.0.0

# Session cookies
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=${COOKIE_SECURE:true}
server.servlet.session.cookie.same-site=lax
server.servlet.session.tracking-modes=cookie

# ----------------------------------------
# Datasource (MySQL)
# ----------------------------------------
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=8


# ----------------------------------------
# JPA / Hibernate
# ----------------------------------------
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# ----------------------------------------
# JWT Configuration
# ----------------------------------------
JWT_SECRET=${JWT_SECRET}
mybank.jwt.secret=${JWT_SECRET}
mybank.jwt.expires-ms=${JWT_EXP_MS:900000}
mybank.refresh.expiry-days=30

# ----------------------------------------
# OAuth2 Configuration (Google SSO)
# ----------------------------------------
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.client-authentication-method=client_secret_post
spring.security.oauth2.client.registration.google.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.google.redirect-uri=${GOOGLE_REDIRECT_URI}
spring.security.oauth2.client.registration.google.scope=openid,profile,email
spring.security.oauth2.client.provider.google.issuer-uri=https://accounts.google.com

# ----------------------------------------
# MyBank Custom Config
# ----------------------------------------
app.frontend-url=${FRONTEND_URL:http://localhost:3000}

# ----------------------------------------
# Feature Flags
# ----------------------------------------
feature.sso.enabled=true

# ----------------------------------------
# Logging
# ----------------------------------------
logging.level.org.springframework.security=INFO

# Admin self-registration gate
admin.registration.key=${ADMIN_REGISTRATION_KEY:}
